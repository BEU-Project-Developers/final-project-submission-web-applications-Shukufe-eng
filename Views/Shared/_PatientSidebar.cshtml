<div class="dashboard-sidebar">
    <div class="patient-info mb-4">
        <div class="text-center">
            <div class="avatar-lg mx-auto mb-3">
                <div class="avatar-title rounded-circle bg-primary text-white">                    @{
                        var patient = ViewBag.CurrentPatient as Patient;
                        if (patient != null)
                        {
                            var initials = patient.Name.Split(' ').Select(n => n[0]).Take(2);
                            @(String.Join("", initials));
                        }
                        else
                        {
                            @("P");
                        }
                    }
                </div>
            </div>
            @if (ViewBag.CurrentPatient != null)
            {
                <h5 class="mb-1">@((ViewBag.CurrentPatient as Patient)?.Name ?? "Patient")</h5>
                <p class="text-muted">@((ViewBag.CurrentPatient as Patient)?.Email ?? "")</p>
            }
        </div>
    </div>
    
    <nav class="dashboard-nav">
        <ul class="list-unstyled">
            <li class="mb-2">
                <a href="@Url.Action("Dashboard", "Patient")" 
                   class="nav-link @(ViewContext.RouteData.Values["Action"]?.ToString() == "Dashboard" ? "active" : "")">
                    <i class="fas fa-tachometer-alt me-2"></i> Dashboard
                </a>
            </li>
            <li class="mb-2">
                <a href="@Url.Action("Appointments", "Patient")" 
                   class="nav-link @(ViewContext.RouteData.Values["Action"]?.ToString() == "Appointments" ? "active" : "")">
                    <i class="fas fa-calendar-check me-2"></i> My Appointments
                </a>
            </li>
            <li class="mb-2">
                <a href="@Url.Action("BookAppointment", "Patient")" 
                   class="nav-link @(ViewContext.RouteData.Values["Action"]?.ToString() == "BookAppointment" ? "active" : "")">
                    <i class="fas fa-calendar-plus me-2"></i> Book Appointment
                </a>
            </li>
            <li class="mb-2">
                <a href="@Url.Action("LabResults", "Patient")" 
                   class="nav-link @(ViewContext.RouteData.Values["Action"]?.ToString() == "LabResults" ? "active" : "")">
                    <i class="fas fa-vial me-2"></i> Lab Results
                </a>
            </li>
            <li class="mb-2">
                <a href="@Url.Action("Profile", "Patient")" 
                   class="nav-link @(ViewContext.RouteData.Values["Action"]?.ToString() == "Profile" ? "active" : "")">
                    <i class="fas fa-user me-2"></i> Profile
                </a>
            </li>
            <li class="mb-2">
                <a href="@Url.Action("Logout", "Home")" class="nav-link text-danger">
                    <i class="fas fa-sign-out-alt me-2"></i> Logout
                </a>
            </li>
        </ul>
    </nav>
</div>

<style>
    .dashboard-sidebar {
        background: #f8f9fa;
        border-radius: 10px;
        padding: 1.5rem;
        box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
    }
    
    .avatar-lg {
        width: 80px;
        height: 80px;
    }
    
    .avatar-title {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 24px;
        font-weight: 600;
    }
    
    .nav-link {
        display: flex;
        align-items: center;
        padding: 0.75rem 1rem;
        color: #495057;
        text-decoration: none;
        border-radius: 8px;
        transition: all 0.3s ease;
    }
    
    .nav-link:hover {
        background-color: #e9ecef;
        color: #0d6efd;
        text-decoration: none;
    }
    
    .nav-link.active {
        background-color: #0d6efd;
        color: white;
    }
    
    .nav-link.active i {
        color: white;
    }
    
    .nav-link i {
        width: 20px;
        text-align: center;
    }
</style>
